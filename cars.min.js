const vehicleConsumption={A:3,B:3.5,C:4},consumptionIncrease=1.009;class Duration{constructor(mins){this.negative=mins<0,this.negative&&(mins=-mins);const hours=mins/60,rhours=Math.floor(hours),minutes=60*(hours-rhours),rminutes=Math.round(minutes);this.hours=rhours,this.minutes=rminutes}compare(other){const totalMinutes=60*this.hours+this.minutes,otherminutes=60*other.hours+other.minutes;return new Duration(totalMinutes-otherminutes)}toString(compare){return(this.negative?"-":compare?"+":"")+this.hours+"h, "+this.minutes+"min"}}class Consumption{constructor(consumption){this.negative=consumption<0,this.consumption=consumption}compare(other){return new Consumption(this.consumption-other.consumption)}toString(compare){return(this.compare&&!this.negative?"+":"")+this.consumption.toFixed(2)+" l"}}function animateCar(elem,duration){return elem.animate([{transform:"translateX(0px)"},{transform:"translateX(100%) translateX(-50px)"}],{duration:duration,iterations:1,delay:500,easing:"ease-in-out",fill:"forwards"})}function getDuration(distance,speed){const mins=distance/speed*60;return new Duration(mins)}function getConsumption(baseConsumption,speed,distance){const consumption=baseConsumption*Math.pow(1.009,speed-1),totalConsumption=distance/100*consumption;return new Consumption(totalConsumption)}function drive(consumption,distance,speed1,speed2){const lane1Duration=Math.min(speed2/speed1*1500,1e4),lane2Duration=Math.min(speed1/speed2*1500,1e4),anim1=animateCar(document.querySelector("#lane1"),lane1Duration),anim2=animateCar(document.querySelector("#lane2"),lane2Duration),car1Duration=getDuration(distance,speed1),car1Consumption=getConsumption(consumption,speed1,distance),car2Duration=getDuration(distance,speed2),car2Consumption=getConsumption(consumption,speed2,distance);anim1.onfinish=function(e){document.querySelector("#car1results").innerHTML="Duration: "+car1Duration.toString()+" ("+car1Duration.compare(car2Duration).toString(!0)+")<br>Consumption: "+car1Consumption.toString()+" ("+car1Consumption.compare(car2Consumption).toString(!0)+")<br>Speed: "+speed1+" km/h"},anim2.onfinish=function(e){document.querySelector("#car2results").innerHTML="Duration: "+car2Duration.toString()+" ("+car2Duration.compare(car1Duration).toString(!0)+")<br>Consumption: "+car2Consumption.toString()+" ("+car2Consumption.compare(car1Consumption).toString(!0)+")<br>Speed: "+speed2+" km/h"}}function resetState(){const elems=document.querySelectorAll(".results");[].forEach.call(elems,(function(elem){elem.innerHTML=""}))}!function(){const landscape=document.getElementById("landscape"),tree=document.querySelector(".tree");for(var i=0;i<15;++i){const newTree=tree.cloneNode(!0),top=Math.floor(60*Math.random())+30,left=Math.floor(70*Math.random()),width=Math.floor(100*Math.random())+60,height=1.666666*width;Object.assign(newTree.style,{width:width+"px",height:height+"px",top:top+"%",left:left+"%",zIndex:top}),landscape.appendChild(newTree)}const cloud=document.querySelector(".cloud");for(var j=0;j<10;++j){const newCloud=cloud.cloneNode(!0),top=Math.floor(20*Math.random())-10,left=Math.floor(140*Math.random())-40,height=Math.floor(100*Math.random())+50,width=2*height;Object.assign(newCloud.style,{width:width+"px",height:height+"px",top:top+"%",left:left+"%",zIndex:top}),landscape.appendChild(newCloud),newCloud.animate([{transform:"translateX(-200%)"},{transform:"translateX(200%)"},{transform:"translateX(-200%)"}],{duration:Math.floor(2e4*Math.random())+6e4,iterations:1/0})}}();const vehicleInputs=document.getElementsByName("vehicle");[].forEach.call(vehicleInputs,(function(elem){elem.addEventListener("change",event=>{[].forEach.call(document.getElementsByClassName("car"),(function(carElem){carElem.classList.remove("carA"),carElem.classList.remove("carB"),carElem.classList.remove("carC"),carElem.classList.add("car"+event.target.value)}))})})),document.querySelector("#carForm").addEventListener("submit",(function(e){e.preventDefault(),resetState();const distance=document.querySelector('input[name="distance"]'),vehicle=document.querySelector('input[name="vehicle"]:checked'),speed1=document.querySelector('input[name="speed1"]'),speed2=document.querySelector('input[name="speed2"]'),distanceValue=parseFloat(distance.value),speed1Value=parseFloat(speed1.value),speed2Value=parseFloat(speed2.value);drive(vehicleConsumption[vehicle.value],distanceValue,speed1Value,speed2Value)}));